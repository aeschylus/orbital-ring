(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63],{330:(e,t,n)=>{"use strict";n.d(t,{Xt:()=>a,zI:()=>r});let r={RADIUS_KM:6371,RADIUS_M:6371e3,MASS_KG:5972e21,GM:3986004418e5,J2:.00108263,ROTATION_RATE:72921159e-12,EQUATORIAL_CIRCUMFERENCE_KM:40075},a={KM_TO_SCENE:1,M_TO_SCENE:.001}},2023:(e,t,n)=>{"use strict";n.d(t,{zo:()=>l});var r=n(3684),a=n(4547),i=n(12);let o=e=>e===Object(e)&&!Array.isArray(e)&&"function"!=typeof e;function l(e,t){let n=(0,i.C)(e=>e.gl),l=(0,i.G)(a.Tap,o(e)?Object.values(e):e);return(0,r.useLayoutEffect)(()=>{null==t||t(l)},[t]),(0,r.useEffect)(()=>{if("initTexture"in n){let e=[];Array.isArray(l)?e=l:l instanceof a.gPd?e=[l]:o(l)&&(e=Object.values(l)),e.forEach(e=>{e instanceof a.gPd&&n.initTexture(e)})}},[n,l]),(0,r.useMemo)(()=>{if(!o(e))return l;{let t={},n=0;for(let r in e)t[r]=l[n++];return t}},[e,l])}l.preload=e=>i.G.preload(a.Tap,e),l.clear=e=>i.G.clear(a.Tap,e)},4651:function(e){var t;(t=function(){function e(e){return a.appendChild(e.dom),e}function n(e){for(var t=0;t<a.children.length;t++)a.children[t].style.display=t===e?"block":"none";r=e}var r=0,a=document.createElement("div");a.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",a.addEventListener("click",function(e){e.preventDefault(),n(++r%a.children.length)},!1);var i=(performance||Date).now(),o=i,l=0,s=e(new t.Panel("FPS","#0ff","#002")),u=e(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=e(new t.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:a,addPanel:e,showPanel:n,begin:function(){i=(performance||Date).now()},end:function(){l++;var e=(performance||Date).now();if(u.update(e-i,200),e>o+1e3&&(s.update(1e3*l/(e-o),100),o=e,l=0,c)){var t=performance.memory;c.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){i=this.end()},domElement:a,setMode:n}}).Panel=function(e,t,n){var r=1/0,a=0,i=Math.round,o=i(window.devicePixelRatio||1),l=80*o,s=48*o,u=3*o,c=2*o,f=3*o,d=15*o,m=74*o,p=30*o,h=document.createElement("canvas");h.width=l,h.height=s,h.style.cssText="width:80px;height:48px";var g=h.getContext("2d");return g.font="bold "+9*o+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=n,g.fillRect(0,0,l,s),g.fillStyle=t,g.fillText(e,u,c),g.fillRect(f,d,m,p),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(f,d,m,p),{dom:h,update:function(s,x){r=Math.min(r,s),a=Math.max(a,s),g.fillStyle=n,g.globalAlpha=1,g.fillRect(0,0,l,d),g.fillStyle=t,g.fillText(i(s)+" "+e+" ("+i(r)+"-"+i(a)+")",u,c),g.drawImage(h,f+o,d,m-o,p,f,d,m-o,p),g.fillRect(f+m-o,d,o,p),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(f+m-o,d,o,i((1-s/x)*p))}}},e.exports=t},6063:(e,t,n)=>{"use strict";n.r(t),n.d(t,{SimulationCanvas:()=>C});var r=n(5896),a=n(5118),i=n(472),o=n(7115),l=n(3684),s=n(12),u=n(4651),c=n.n(u);function f(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}function d({showPanel:e=0,className:t,parent:n}){let r=function(e,t=[],n){let[r,a]=l.useState();return l.useLayoutEffect(()=>{let t=e();return a(t),f(void 0,t),()=>f(void 0,null)},t),r}(()=>new(c()),[]);return l.useEffect(()=>{if(r){let a=n&&n.current||document.body;r.showPanel(e),null==a||a.appendChild(r.dom);let i=(null!=t?t:"").split(" ").filter(e=>e);i.length&&r.dom.classList.add(...i);let o=(0,s.j)(()=>r.begin()),l=(0,s.k)(()=>r.end());return()=>{i.length&&r.dom.classList.remove(...i),null==a||a.removeChild(r.dom),o(),l()}}},[n,r,t,e]),null}var m=n(2023),p=n(4547),h=n(330),g=n(6651);function x(){let e=(0,l.useRef)(null),t=h.zI.RADIUS_KM*h.Xt.KM_TO_SCENE,n=g.F.useSelector(e=>e.context.parameters.showAtmosphere),a=(0,m.zo)("/textures/earth_daymap.jpg"),i=(0,l.useMemo)(()=>new p.BKk({vertexShader:"\n  varying vec3 vNormal;\n  varying vec3 vPosition;\n  void main() {\n    vNormal = normalize(normalMatrix * normal);\n    vPosition = (modelViewMatrix * vec4(position, 1.0)).xyz;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  }\n",fragmentShader:"\n  varying vec3 vNormal;\n  varying vec3 vPosition;\n  void main() {\n    float intensity = pow(0.7 - dot(vNormal, vec3(0.0, 0.0, 1.0)), 2.0);\n    gl_FragColor = vec4(0.3, 0.6, 1.0, 1.0) * intensity;\n  }\n",blending:p.EZo,side:p.hsX,transparent:!0}),[]);return(0,s.D)((t,n)=>{e.current&&(e.current.rotation.y+=h.zI.ROTATION_RATE*n)}),(0,r.jsxs)("group",{children:[(0,r.jsxs)("mesh",{ref:e,children:[(0,r.jsx)("sphereGeometry",{args:[t,64,64]}),(0,r.jsx)("meshStandardMaterial",{map:a,roughness:.8})]}),n&&(0,r.jsx)("mesh",{material:i,children:(0,r.jsx)("sphereGeometry",{args:[1.02*t,64,64]})})]})}let v=(0,l.createContext)(null),M=new p.Pq0;function E(e){let{children:t}=e,n=(0,l.useRef)(null),a=(0,l.useRef)(new p.Pq0),{controls:i}=(0,s.C)(),o=(0,l.useRef)({getWorldOrigin:()=>a.current}).current;return(0,s.D)(e=>{let{camera:t}=e;n.current&&t.position.length()>1e3&&(M.copy(t.position),a.current.add(M),n.current.position.sub(M),t.position.set(0,0,0),i&&"target"in i&&i.target.sub(M))},-100),(0,r.jsx)(v.Provider,{value:o,children:(0,r.jsx)("group",{ref:n,children:t})})}function S(e){let{tubularSegments:t=256,radialSegments:n=32}=e,a=(0,l.useRef)(null),i=g.F.useSelector(e=>e.context.parameters.altitude),o=g.F.useSelector(e=>"running"===e.value),u=(h.zI.RADIUS_KM+i)*h.Xt.KM_TO_SCENE,c=(0,l.useMemo)(()=>new p.O3Y(u,2*h.Xt.KM_TO_SCENE,n,t),[u,n,t]);return(0,s.D)((e,t)=>{a.current&&o&&(a.current.rotation.z+=.01*t)}),(0,r.jsx)("mesh",{ref:a,geometry:c,rotation:[Math.PI/2,0,0],children:(0,r.jsx)("meshStandardMaterial",{color:"#4fc3f7",emissive:"#1565c0",emissiveIntensity:.3,metalness:.8,roughness:.2})})}function y(e){let{maxVisible:t}=e,n=g.F.useSelector(e=>e.context.parameters.altitude),a=g.F.useSelector(e=>e.context.parameters.tetherCount),i=g.F.useSelector(e=>e.context.parameters.showTethers),o=t?Math.min(a,t):a,s=(0,l.useMemo)(()=>{let e=h.zI.RADIUS_KM*h.Xt.KM_TO_SCENE,t=(h.zI.RADIUS_KM+n)*h.Xt.KM_TO_SCENE,r=[];for(let n=0;n<o;n++){let a=n/o*Math.PI*2,i=Math.cos(a),l=Math.sin(a);r.push(i*e,0,l*e),r.push(i*t,0,l*t)}let a=new p.LoY;return a.setAttribute("position",new p.qtW(r,3)),a},[n,o]);return i&&0!==o?(0,r.jsx)("lineSegments",{geometry:s,children:(0,r.jsx)("lineBasicMaterial",{color:"#ffffff",opacity:.2,transparent:!0})}):null}let _={DETAIL:100,CLOSE:1e3,MEDIUM:1e4};function A(e,t,n){let r=["DETAIL","CLOSE","MEDIUM","FAR"],a=r.indexOf(t);return r.indexOf(n)<a?.9*e:1.1*e}function I(){let e=g.F.useSelector(e=>e.context.parameters.altitude),t=(h.zI.RADIUS_KM+e)*h.Xt.KM_TO_SCENE,n=(0,l.useMemo)(()=>{let e=[];for(let n=0;n<=128;n++){let r=n/128*Math.PI*2;e.push(new p.Pq0(Math.cos(r)*t,0,Math.sin(r)*t))}return new p.LoY().setFromPoints(e)},[t]);return(0,r.jsx)("lineLoop",{geometry:n,children:(0,r.jsx)("lineBasicMaterial",{color:"#4fc3f7",linewidth:2})})}function j(){let[e,t]=(0,l.useState)("FAR"),{getWorldOrigin:n}=function(){let e=(0,l.useContext)(v);if(!e)throw Error("useWorldOrigin must be used inside CameraRelativeGroup");return e}(),a=g.F.useSelector(e=>e.context.parameters.altitude),i=(h.zI.RADIUS_KM+a)*h.Xt.KM_TO_SCENE;return(0,l.useRef)(new p.Pq0),(0,s.D)(r=>{var a;let{camera:o}=r,l=n(),s=o.position.clone().add(l),u=Math.abs(new p.I9Y(s.x,s.z).length()-i),c=(a=Math.sqrt(u*u+s.y*s.y),a<A(_.DETAIL,e,"DETAIL")?"DETAIL":a<A(_.CLOSE,e,"CLOSE")?"CLOSE":a<A(_.MEDIUM,e,"MEDIUM")?"MEDIUM":"FAR");c!==e&&t(c)}),(0,r.jsxs)("group",{children:["FAR"===e&&(0,r.jsx)(I,{}),"MEDIUM"===e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S,{tubularSegments:64,radialSegments:8}),(0,r.jsx)(y,{maxVisible:200})]}),"CLOSE"===e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S,{tubularSegments:128,radialSegments:16}),(0,r.jsx)(y,{maxVisible:500})]}),"DETAIL"===e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S,{tubularSegments:256,radialSegments:32}),(0,r.jsx)(y,{})]})]})}function w(){let e=g.F.useActorRef();return(0,l.useEffect)(()=>{e.send({type:"LOADED"})},[e]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("ambientLight",{intensity:.1}),(0,r.jsx)("directionalLight",{position:[5e4,3e4,5e4],intensity:1.5}),(0,r.jsx)(i.N,{makeDefault:!0,minDistance:h.zI.RADIUS_KM*h.Xt.KM_TO_SCENE*1.01,maxDistance:h.zI.RADIUS_KM*h.Xt.KM_TO_SCENE*5,enableDamping:!0,dampingFactor:.05}),(0,r.jsxs)(E,{children:[(0,r.jsx)(o.A,{radius:1e5,depth:5e4,count:5e3,factor:100,saturation:0}),(0,r.jsx)(x,{}),(0,r.jsx)(j,{})]}),(0,r.jsx)(d,{})]})}function C(){return(0,r.jsx)(a.Hl,{camera:{position:[0,0,h.zI.RADIUS_KM*h.Xt.KM_TO_SCENE*2.5],fov:45,near:.1,far:1e6},gl:{logarithmicDepthBuffer:!0,antialias:!0},style:{width:"100%",height:"100%"},children:(0,r.jsx)(w,{})})}},7115:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(3684),a=n(12),i=n(4547);let o=parseInt(i.sPf.replace(/\D+/g,""));class l extends i.BKk{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${o>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}let s=e=>new i.Pq0().setFromSpherical(new i.YHV(e,Math.acos(1-2*Math.random()),2*Math.random()*Math.PI)),u=r.forwardRef(({radius:e=100,depth:t=50,count:n=5e3,saturation:o=0,factor:u=4,fade:c=!1,speed:f=1},d)=>{let m=r.useRef(null),[p,h,g]=r.useMemo(()=>{let r=[],a=[],l=Array.from({length:n},()=>(.5+.5*Math.random())*u),c=new i.Q1f,f=e+t,d=t/n;for(let e=0;e<n;e++)f-=d*Math.random(),r.push(...s(f).toArray()),c.setHSL(e/n,o,.9),a.push(c.r,c.g,c.b);return[new Float32Array(r),new Float32Array(a),new Float32Array(l)]},[n,t,u,e,o]);(0,a.D)(e=>m.current&&(m.current.uniforms.time.value=e.clock.elapsedTime*f));let[x]=r.useState(()=>new l);return r.createElement("points",{ref:d},r.createElement("bufferGeometry",null,r.createElement("bufferAttribute",{attach:"attributes-position",args:[p,3]}),r.createElement("bufferAttribute",{attach:"attributes-color",args:[h,3]}),r.createElement("bufferAttribute",{attach:"attributes-size",args:[g,1]})),r.createElement("primitive",{ref:m,object:x,attach:"material",blending:i.EZo,"uniforms-fade-value":c,depthWrite:!1,transparent:!0,vertexColors:!0}))})}}]);