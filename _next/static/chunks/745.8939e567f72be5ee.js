"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[745],{330:(e,t,s)=>{s.d(t,{Xt:()=>r,zI:()=>n});let n={RADIUS_KM:6371,RADIUS_M:6371e3,MASS_KG:5972e21,GM:3986004418e5,J2:.00108263,ROTATION_RATE:72921159e-12,EQUATORIAL_CIRCUMFERENCE_KM:40075},r={KM_TO_SCENE:1,M_TO_SCENE:.001}},2023:(e,t,s)=>{s.d(t,{zo:()=>i});var n=s(3684),r=s(4547),a=s(12);let o=e=>e===Object(e)&&!Array.isArray(e)&&"function"!=typeof e;function i(e,t){let s=(0,a.C)(e=>e.gl),i=(0,a.G)(r.Tap,o(e)?Object.values(e):e);return(0,n.useLayoutEffect)(()=>{null==t||t(i)},[t]),(0,n.useEffect)(()=>{if("initTexture"in s){let e=[];Array.isArray(i)?e=i:i instanceof r.gPd?e=[i]:o(i)&&(e=Object.values(i)),e.forEach(e=>{e instanceof r.gPd&&s.initTexture(e)})}},[s,i]),(0,n.useMemo)(()=>{if(!o(e))return i;{let t={},s=0;for(let n in e)t[n]=i[s++];return t}},[e,i])}i.preload=e=>a.G.preload(r.Tap,e),i.clear=e=>a.G.clear(r.Tap,e)},7115:(e,t,s)=>{s.d(t,{A:()=>c});var n=s(3684),r=s(12),a=s(4547);let o=parseInt(a.sPf.replace(/\D+/g,""));class i extends a.BKk{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${o>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}let l=e=>new a.Pq0().setFromSpherical(new a.YHV(e,Math.acos(1-2*Math.random()),2*Math.random()*Math.PI)),c=n.forwardRef(({radius:e=100,depth:t=50,count:s=5e3,saturation:o=0,factor:c=4,fade:h=!1,speed:m=1},u)=>{let d=n.useRef(null),[p,f,g]=n.useMemo(()=>{let n=[],r=[],i=Array.from({length:s},()=>(.5+.5*Math.random())*c),h=new a.Q1f,m=e+t,u=t/s;for(let e=0;e<s;e++)m-=u*Math.random(),n.push(...l(m).toArray()),h.setHSL(e/s,o,.9),r.push(h.r,h.g,h.b);return[new Float32Array(n),new Float32Array(r),new Float32Array(i)]},[s,t,c,e,o]);(0,r.D)(e=>d.current&&(d.current.uniforms.time.value=e.clock.elapsedTime*m));let[M]=n.useState(()=>new i);return n.createElement("points",{ref:u},n.createElement("bufferGeometry",null,n.createElement("bufferAttribute",{attach:"attributes-position",args:[p,3]}),n.createElement("bufferAttribute",{attach:"attributes-color",args:[f,3]}),n.createElement("bufferAttribute",{attach:"attributes-size",args:[g,1]})),n.createElement("primitive",{ref:d,object:M,attach:"material",blending:a.EZo,"uniforms-fade-value":h,depthWrite:!1,transparent:!0,vertexColors:!0}))})},8745:(e,t,s)=>{s.r(t),s.d(t,{IntroCanvas:()=>R});var n=s(5896),r=s(5118),a=s(330),o=s(3684),i=s(7115),l=s(2272),c=s(1633),h=s(12),m=s(2023),u=s(4547);function d(){let e=(0,o.useRef)(null),t=a.zI.RADIUS_KM*a.Xt.KM_TO_SCENE,s=(0,m.zo)("/textures/earth_daymap.jpg"),r=(0,o.useMemo)(()=>new u.BKk({vertexShader:"\n  varying vec3 vNormal;\n  varying vec3 vPosition;\n  void main() {\n    vNormal = normalize(normalMatrix * normal);\n    vPosition = (modelViewMatrix * vec4(position, 1.0)).xyz;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  }\n",fragmentShader:"\n  varying vec3 vNormal;\n  varying vec3 vPosition;\n  void main() {\n    float intensity = pow(0.7 - dot(vNormal, vec3(0.0, 0.0, 1.0)), 2.0);\n    gl_FragColor = vec4(0.3, 0.6, 1.0, 1.0) * intensity;\n  }\n",blending:u.EZo,side:u.hsX,transparent:!0}),[]);return(0,h.D)((t,s)=>{e.current&&(e.current.rotation.y+=a.zI.ROTATION_RATE*s)}),(0,n.jsxs)("group",{children:[(0,n.jsxs)("mesh",{ref:e,children:[(0,n.jsx)("sphereGeometry",{args:[t,64,64]}),(0,n.jsx)("meshStandardMaterial",{map:s,roughness:.8})]}),(0,n.jsx)("mesh",{material:r,children:(0,n.jsx)("sphereGeometry",{args:[1.02*t,64,64]})})]})}let p=a.zI.RADIUS_KM*a.Xt.KM_TO_SCENE,f={satelliteDesign:[{position:new u.Pq0(0,10,p+440),target:new u.Pq0(0,0,p+400),fov:40},{position:new u.Pq0(25,15,p+425),target:new u.Pq0(0,0,p+400),fov:38},{position:new u.Pq0(35,-5,p+415),target:new u.Pq0(0,0,p+400),fov:36}],bulkLaunches:[{position:new u.Pq0(35,-5,p+415),target:new u.Pq0(0,0,p+400),fov:36},{position:new u.Pq0(.3*p,.2*p,1.6*p),target:new u.Pq0(0,0,0),fov:50},{position:new u.Pq0(.5*p,.4*p,1.5*p),target:new u.Pq0(0,0,0),fov:55}],orbitalPhasing:[{position:new u.Pq0(.5*p,.4*p,1.5*p),target:new u.Pq0(0,0,0),fov:55},{position:new u.Pq0(.2*p,1.8*p,.3*p),target:new u.Pq0(0,0,0),fov:50},{position:new u.Pq0(0,2*p,.1*p),target:new u.Pq0(0,0,0),fov:45}],deployment:[{position:new u.Pq0(0,2*p,.1*p),target:new u.Pq0(0,0,0),fov:45},{position:new u.Pq0(30,20,p+460),target:new u.Pq0(0,0,p+400),fov:36},{position:new u.Pq0(-20,10,p+450),target:new u.Pq0(0,0,p+400),fov:34}],linking:[{position:new u.Pq0(-20,10,p+450),target:new u.Pq0(0,0,p+400),fov:34},{position:new u.Pq0(40,5,p+430),target:new u.Pq0(0,0,p+400),fov:38},{position:new u.Pq0(.3*p,.3*p,1.2*p),target:new u.Pq0(0,0,0),fov:50}],rotorAcceleration:[{position:new u.Pq0(.3*p,.3*p,1.2*p),target:new u.Pq0(0,0,0),fov:50},{position:new u.Pq0(.4*p,.15*p,1.15*p),target:new u.Pq0(0,0,0),fov:48},{position:new u.Pq0(.6*p,.4*p,+p),target:new u.Pq0(0,0,0),fov:52}],bootstrapRedundancy:[{position:new u.Pq0(.6*p,.4*p,+p),target:new u.Pq0(0,0,0),fov:52},{position:new u.Pq0(.8*p,.6*p,.8*p),target:new u.Pq0(0,.05*p,0),fov:50},{position:new u.Pq0(.5*p,+p,.6*p),target:new u.Pq0(0,0,0),fov:48}]},g=new Map;function M(){let e=(0,h.C)(e=>e.camera),t=l.k.useSelector(e=>e.context.currentStage),s=l.k.useSelector(e=>e.context.stageProgress);return(0,h.D)(()=>{let n=c.an[t];if(!n)return;let{position:r,target:a,fov:o}=function(e,t){let s=f[e];if(!s||0===s.length)return{position:new u.Pq0(0,0,2.5*p),target:new u.Pq0(0,0,0),fov:45};let n=Math.max(0,Math.min(1,t));if(!g.has(e)){let t=s.map(e=>e.position.clone()),n=new u.B6O(t,!1,"catmullrom",.5);g.set(e,n)}let r=g.get(e).getPointAt(n),a=s.length-1,o=n*a,i=Math.min(Math.floor(o),a-1),l=o-i;return{position:r,target:s[i].target.clone().lerp(s[i+1].target,l),fov:s[i].fov+(s[i+1].fov-s[i].fov)*l}}(n.key,s);e.position.lerp(r,.08),e.lookAt(a),"fov"in e&&"number"==typeof e.fov&&(e.fov+=(o-e.fov)*.08,e.updateProjectionMatrix())}),null}function x(){let e=(0,o.useRef)(null),t=l.k.useSelector(e=>e.context.stageProgress);return(0,h.D)(()=>{if(!e.current)return;let s=0;t<.05?s=1-t/.05:t>.95&&(s=(t-.95)/.05),e.current.opacity=s,e.current.visible=s>.001}),(0,n.jsxs)("mesh",{renderOrder:9999,children:[(0,n.jsx)("planeGeometry",{args:[2,2]}),(0,n.jsx)("meshBasicMaterial",{ref:e,color:"black",transparent:!0,opacity:0,depthTest:!1,depthWrite:!1})]})}function j(e,t,s){return Math.max(0,Math.min(1,(e-t)/(s-t)))}function y(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}function v(e){let{unfoldProgress:t=0,scale:s=1,emissiveIntensity:r=0,couplingPulse:a=0}=e,i=(0,o.useRef)(null),l=y(j(t,0,.2)),c=y(j(t,.1,.5)),h=y(j(t,.35,.75)),m=j(t,.65,1),d=.08+.32*c,p=d/2,f=.04*l,g=h*Math.PI*.5,M=Math.max(m*r,a),x=(0,o.useMemo)(()=>new u._4j({color:"#9aabb8",metalness:.92,roughness:.12}),[]),v=(0,o.useMemo)(()=>new u._4j({color:"#556677",metalness:.95,roughness:.08,side:u.hsX}),[]),P=(0,o.useMemo)(()=>new u._4j({color:"#1a2d5a",metalness:.3,roughness:.5}),[]),w=(0,o.useMemo)(()=>new u._4j({color:"#334455",metalness:.6,roughness:.3}),[]),b=(0,o.useMemo)(()=>new u._4j({color:"#ccccdd",metalness:.7,roughness:.25}),[]);return(0,n.jsxs)("group",{ref:i,scale:s,children:[(0,n.jsx)("mesh",{material:x,children:(0,n.jsx)("cylinderGeometry",{args:[.028,.028,d,24]})}),(0,n.jsx)("mesh",{material:v,children:(0,n.jsx)("cylinderGeometry",{args:[.022,.022,d+.002,16]})}),[.3,0,-.3].map((e,t)=>(0,n.jsxs)("mesh",{material:x,position:[0,e*d,0],children:[(0,n.jsx)("torusGeometry",{args:[.03,.003,8,24]}),(0,n.jsx)("meshStandardMaterial",{color:"#7a8a98",metalness:.9,roughness:.15})]},"ring-".concat(t))),(0,n.jsxs)("group",{position:[0,p+f,0],children:[(0,n.jsx)("mesh",{material:x,children:(0,n.jsx)("cylinderGeometry",{args:[.035,.028,.012,24]})}),(0,n.jsxs)("mesh",{position:[0,.007,0],children:[(0,n.jsx)("torusGeometry",{args:[.035,.002,8,24]}),(0,n.jsx)("meshStandardMaterial",{color:"#8899aa",metalness:.9,roughness:.1})]})]}),(0,n.jsxs)("group",{position:[0,-p-f,0],children:[(0,n.jsx)("mesh",{material:x,children:(0,n.jsx)("cylinderGeometry",{args:[.028,.035,.012,24]})}),(0,n.jsxs)("mesh",{position:[0,-.007,0],children:[(0,n.jsx)("torusGeometry",{args:[.035,.002,8,24]}),(0,n.jsx)("meshStandardMaterial",{color:"#8899aa",metalness:.9,roughness:.1})]})]}),(0,n.jsxs)("group",{position:[0,p+f+.015,0],children:[(0,n.jsxs)("mesh",{children:[(0,n.jsx)("torusGeometry",{args:[.038,.006,12,32]}),(0,n.jsx)("meshStandardMaterial",{color:"#3366cc",emissive:"#4488ff",emissiveIntensity:M,metalness:.95,roughness:.05})]}),(0,n.jsxs)("mesh",{children:[(0,n.jsx)("torusGeometry",{args:[.028,.004,8,32]}),(0,n.jsx)("meshStandardMaterial",{color:"#2255bb",emissive:"#6699ff",emissiveIntensity:.7*M,metalness:.95,roughness:.05})]})]}),(0,n.jsxs)("group",{position:[0,-p-f-.015,0],children:[(0,n.jsxs)("mesh",{children:[(0,n.jsx)("torusGeometry",{args:[.038,.006,12,32]}),(0,n.jsx)("meshStandardMaterial",{color:"#3366cc",emissive:"#4488ff",emissiveIntensity:M,metalness:.95,roughness:.05})]}),(0,n.jsxs)("mesh",{children:[(0,n.jsx)("torusGeometry",{args:[.028,.004,8,32]}),(0,n.jsx)("meshStandardMaterial",{color:"#2255bb",emissive:"#6699ff",emissiveIntensity:.7*M,metalness:.95,roughness:.05})]})]}),[0,1,2,3].map(e=>{let t=e*Math.PI/2,s=.029*Math.cos(t),r=.029*Math.sin(t),a=-Math.sin(t),o=Math.cos(t);return(0,n.jsxs)("group",{position:[s,0,r],children:[(0,n.jsx)("mesh",{material:x,children:(0,n.jsx)("boxGeometry",{args:[.004,.015,.004]})}),(0,n.jsx)("group",{rotation:[a*g,0,o*g],children:(0,n.jsxs)("group",{position:[.04*Math.cos(t),0,.04*Math.sin(t)],children:[(0,n.jsx)("mesh",{material:P,position:[0,.001,0],children:(0,n.jsx)("boxGeometry",{args:[.075,.001,.035]})}),(0,n.jsx)("mesh",{material:w,position:[0,-.001,0],children:(0,n.jsx)("boxGeometry",{args:[.075,.001,.035]})}),[-.025,0,.025].map((t,s)=>(0,n.jsxs)("mesh",{position:[t,.0018,0],children:[(0,n.jsx)("boxGeometry",{args:[.001,5e-4,.034]}),(0,n.jsx)("meshStandardMaterial",{color:"#0a1533"})]},"grid-".concat(e,"-").concat(s)))]})})]},"panel-".concat(e))}),[0,1].map(e=>{let t=.25*Math.PI+e*Math.PI,s=.03*Math.cos(t),r=.03*Math.sin(t),a=.005+.01*h;return(0,n.jsx)("mesh",{material:b,position:[s+Math.cos(t)*a,.3*d,r+Math.sin(t)*a],rotation:[0,t,0],children:(0,n.jsx)("boxGeometry",{args:[.02,.008,.001]})},"fin-".concat(e))}),[0,1,2,3].map(e=>{let t=e*Math.PI/2+.25*Math.PI,s=.025*Math.cos(t),r=.025*Math.sin(t);return(0,n.jsxs)("mesh",{position:[s,-p-f-.025,r],rotation:[.3*Math.cos(t),0,.3*Math.sin(t)],children:[(0,n.jsx)("coneGeometry",{args:[.004,.008,6]}),(0,n.jsx)("meshStandardMaterial",{color:"#777788",metalness:.9,roughness:.15})]},"thruster-".concat(e))})]})}let P=a.zI.RADIUS_KM*a.Xt.KM_TO_SCENE;function w(e){let{scale:t=1,exhaustIntensity:s=1,fairingOpen:r=0}=e,a=(0,o.useRef)(null),i=(0,o.useRef)(null),l=(0,o.useMemo)(()=>new Float32Array(90),[]),c=(0,o.useMemo)(()=>Array.from({length:30},()=>({offset:Math.random(),radial:.02*Math.random(),angle:Math.random()*Math.PI*2})),[]);(0,h.D)((e,t)=>{if(i.current){for(let e=0;e<30;e++){let s=c[e];s.offset+=3*t,s.offset>1&&(s.offset-=1);let n=.12*s.offset,r=s.radial*(1+2*s.offset);l[3*e]=Math.cos(s.angle)*r,l[3*e+1]=-.08-n,l[3*e+2]=Math.sin(s.angle)*r}i.current.geometry.getAttribute("position").needsUpdate=!0}});let m=.8*r;return(0,n.jsxs)("group",{ref:a,scale:t,children:[(0,n.jsxs)("mesh",{position:[0,-.02,0],children:[(0,n.jsx)("cylinderGeometry",{args:[.02,.022,.08,16]}),(0,n.jsx)("meshStandardMaterial",{color:"#dddddd",metalness:.7,roughness:.25})]}),(0,n.jsxs)("mesh",{position:[0,.03,0],children:[(0,n.jsx)("cylinderGeometry",{args:[.016,.02,.04,16]}),(0,n.jsx)("meshStandardMaterial",{color:"#cccccc",metalness:.7,roughness:.25})]}),(0,n.jsxs)("group",{position:[0,.07,0],children:[(0,n.jsx)("group",{rotation:[m,0,0],children:(0,n.jsxs)("mesh",{position:[0,.02,.005],children:[(0,n.jsx)("sphereGeometry",{args:[.017,16,8,0,Math.PI]}),(0,n.jsx)("meshStandardMaterial",{color:"#eeeeee",metalness:.5,roughness:.3,side:u.$EB})]})}),(0,n.jsx)("group",{rotation:[-m,0,0],children:(0,n.jsxs)("mesh",{position:[0,.02,-.005],children:[(0,n.jsx)("sphereGeometry",{args:[.017,16,8,Math.PI,Math.PI]}),(0,n.jsx)("meshStandardMaterial",{color:"#eeeeee",metalness:.5,roughness:.3,side:u.$EB})]})})]}),(0,n.jsxs)("mesh",{position:[0,-.065,0],children:[(0,n.jsx)("cylinderGeometry",{args:[.008,.016,.015,12]}),(0,n.jsx)("meshStandardMaterial",{color:"#555555",metalness:.9,roughness:.1})]}),s>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("mesh",{position:[0,-.09,0],children:[(0,n.jsx)("coneGeometry",{args:[.022,.06,12]}),(0,n.jsx)("meshStandardMaterial",{color:"#ff6600",emissive:"#ff4400",emissiveIntensity:3*s,transparent:!0,opacity:.6*s})]}),(0,n.jsxs)("points",{ref:i,children:[(0,n.jsx)("bufferGeometry",{children:(0,n.jsx)("bufferAttribute",{attach:"attributes-position",args:[l,3]})}),(0,n.jsx)("pointsMaterial",{color:"#ff8833",size:.004*t,sizeAttenuation:!0,transparent:!0,opacity:.7*s,blending:u.EZo})]})]}),[0,1,2,3].map(e=>{let t=e*Math.PI/2;return(0,n.jsxs)("mesh",{position:[.024*Math.cos(t),-.05,.024*Math.sin(t)],rotation:[0,t,0],children:[(0,n.jsx)("boxGeometry",{args:[.002,.025,.012]}),(0,n.jsx)("meshStandardMaterial",{color:"#aaaaaa",metalness:.7,roughness:.3})]},e)})]})}let b=a.zI.RADIUS_KM*a.Xt.KM_TO_SCENE,I=a.zI.RADIUS_KM*a.Xt.KM_TO_SCENE+400,A=a.zI.RADIUS_KM*a.Xt.KM_TO_SCENE,S=a.zI.RADIUS_KM*a.Xt.KM_TO_SCENE,_=a.zI.RADIUS_KM*a.Xt.KM_TO_SCENE+400,q=a.zI.RADIUS_KM*a.Xt.KM_TO_SCENE+400;function E(e){return 1-Math.pow(1-e,3)}let G={satelliteDesign:function(e){let{progress:t}=e,s=(0,o.useRef)(null);(0,h.D)((e,t)=>{s.current&&(s.current.rotation.y+=.3*t,s.current.rotation.x+=.08*t)});let r=.3*Math.sin(t*Math.PI*6)+.3;return(0,n.jsxs)("group",{position:[0,0,P+400],children:[(0,n.jsx)("pointLight",{position:[20,15,25],intensity:1.2,distance:150}),(0,n.jsx)("pointLight",{position:[-15,-8,-20],intensity:.4,distance:150,color:"#aaccff"}),(0,n.jsx)("pointLight",{position:[0,0,-30],intensity:.3,distance:150,color:"#6688bb"}),(0,n.jsx)("group",{ref:s,rotation:[.2,0,.1],children:(0,n.jsx)(v,{unfoldProgress:t>.7?(t-.7)/.3*.15:0,scale:150,emissiveIntensity:.5,couplingPulse:r})})]})},bulkLaunches:function(e){let{progress:t}=e,s=(0,o.useMemo)(()=>[{longitude:-.12,latitude:.04,launchDelay:0,deployAlt:.6},{longitude:-.04,latitude:-.02,launchDelay:.08,deployAlt:.65},{longitude:.04,latitude:.01,launchDelay:.14,deployAlt:.55},{longitude:.12,latitude:-.03,launchDelay:.05,deployAlt:.7},{longitude:.2,latitude:.02,launchDelay:.2,deployAlt:.6},{longitude:-.2,latitude:-.01,launchDelay:.12,deployAlt:.65},{longitude:.28,latitude:.03,launchDelay:.25,deployAlt:.58}],[]);return(0,n.jsxs)("group",{children:[s.map((e,s)=>{let r=Math.max(0,Math.min(1,(t-e.launchDelay)/(1-e.launchDelay)));if(r<=0)return null;let a=1-(1-r)*(1-r),o=b+500*a,i=a>e.deployAlt?Math.min(1,(a-e.deployAlt)/.15):0,l=e.longitude,c=e.latitude,h=Math.cos(c)*Math.sin(l)*o,m=Math.sin(c)*o,d=Math.cos(c)*Math.cos(l)*o,p=new u.Pq0(h,m,d).normalize(),f=new u.Pq0(0,1,0),g=new u.PTz().setFromUnitVectors(f,p);return(0,n.jsx)("group",{position:[h,m,d],quaternion:g,children:(0,n.jsx)(w,{scale:1500,exhaustIntensity:r<.8?1:(1-r)/.2,fairingOpen:i})},s)}),s.map((e,s)=>{let r=Math.max(0,Math.min(1,(t-e.launchDelay)/(1-e.launchDelay)));if(r<=0)return null;let a=e.longitude,o=e.latitude,i=b+(1-(1-r)*(1-r))*250,l=Math.cos(o)*Math.sin(a)*i,c=Math.sin(o)*i,h=Math.cos(o)*Math.cos(a)*i;return(0,n.jsxs)("mesh",{position:[l,c,h],children:[(0,n.jsx)("sphereGeometry",{args:[40,8,8]}),(0,n.jsx)("meshStandardMaterial",{color:"#ff6622",emissive:"#ff4400",emissiveIntensity:3,transparent:!0,opacity:.6*(r<.8?1:(1-r)/.2),blending:u.EZo,depthWrite:!1})]},"trail-".concat(s))})]})},orbitalPhasing:function(e){let{progress:t}=e,s=(0,o.useRef)(null),r=(0,o.useRef)(null),a=(0,o.useMemo)(()=>new u.kn4,[]),i=(0,o.useMemo)(()=>new u.Q1f,[]),l=(0,o.useMemo)(()=>new u.Gu$(1,8,8),[]),c=(0,o.useMemo)(()=>new u.Gu$(1,6,6),[]),m=(0,o.useMemo)(()=>Array.from({length:120},(e,t)=>{let s=t/120*Math.PI*2;return{startAngle:s+(Math.random()-.5)*1.5,startInclination:(Math.random()-.5)*.5,startR:I+(Math.random()-.5)*500,targetAngle:s,delay:.3*Math.random()}}),[]);return(0,h.D)(()=>{if(s.current){for(let e=0;e<120;e++){let n=m[e],o=Math.max(0,Math.min(1,(t-n.delay)/(1-n.delay))),l=o<.5?2*o*o:1-Math.pow(-2*o+2,2)/2,c=n.startAngle+(n.targetAngle-n.startAngle)*l,h=n.startR+(I-n.startR)*l,d=n.startInclination*(1-l),p=Math.cos(c)*Math.cos(d)*h,f=Math.sin(d)*h,g=Math.sin(c)*Math.cos(d)*h;if(a.makeTranslation(p,f,g),a.scale(new u.Pq0(20,20,20)),s.current.setMatrixAt(e,a),i.setRGB(1-.5*l,.6+.35*l,.4+.6*l),s.current.setColorAt(e,i),r.current){let t=40*!!(o>.01&&o<.85),s=new u.kn4().makeTranslation(p,f,g);s.scale(new u.Pq0(t,t,t)),r.current.setMatrixAt(e,s)}}s.current.instanceMatrix.needsUpdate=!0,s.current.instanceColor&&(s.current.instanceColor.needsUpdate=!0),r.current&&(r.current.instanceMatrix.needsUpdate=!0)}}),(0,n.jsxs)("group",{children:[(0,n.jsx)("instancedMesh",{ref:s,args:[l,void 0,120],children:(0,n.jsx)("meshStandardMaterial",{metalness:.9,roughness:.1,vertexColors:!0,emissive:"#446688",emissiveIntensity:.3})}),(0,n.jsx)("instancedMesh",{ref:r,args:[c,void 0,120],children:(0,n.jsx)("meshStandardMaterial",{color:"#4488ff",emissive:"#4488ff",emissiveIntensity:2,transparent:!0,opacity:.25,blending:u.EZo,depthWrite:!1})})]})},deployment:function(e){let{progress:t}=e,s=(0,o.useRef)(null);(0,h.D)((e,t)=>{s.current&&(s.current.rotation.y+=.15*t)});let r=t>.65?.5*Math.sin((t-.65)*Math.PI*14)+.5:0;return(0,n.jsxs)("group",{position:[0,0,A+400],children:[(0,n.jsx)("pointLight",{position:[25,18,30],intensity:1.5,distance:200}),(0,n.jsx)("pointLight",{position:[-18,-10,-25],intensity:.4,distance:200,color:"#aaccff"}),(0,n.jsx)("pointLight",{position:[0,0,-40],intensity:.3,distance:200,color:"#6688bb"}),(0,n.jsx)("group",{ref:s,rotation:[.25,0,.12],children:(0,n.jsx)(v,{unfoldProgress:t,scale:150,emissiveIntensity:1.5,couplingPulse:r})})]})},linking:function(e){let{progress:t}=e,s=Math.min(1,t/.5),r=t>.5?Math.min(1,(t-.5)/.2):0,a=t>.7?(t-.7)/.3:0,i=40*(1-(s<.5?4*s*s*s:1-Math.pow(-2*s+2,3)/2)),l=t<.7?.4*Math.sin(t*Math.PI*14)+.4*s:1,c=r>0&&r<.3?(.3-r)/.3:0,m=(0,o.useMemo)(()=>{let e=[],t=S+400,s=.5*Math.PI;for(let n=0;n<=128;n++){let r=-s/2+n/128*s;e.push(new u.Pq0(Math.cos(r)*t,0,Math.sin(r)*t))}let n=new u.LoY().setFromPoints(e),r=new u.mrM({color:"#4488ff",transparent:!0,opacity:0});return{obj:new u.N1A(n,r),totalPoints:129}},[]);return(0,h.D)(()=>{m.obj.material.opacity=.8*a,m.obj.geometry.setDrawRange(0,Math.floor(a*m.totalPoints))}),(0,n.jsxs)("group",{children:[(0,n.jsxs)("group",{position:[0,0,S+400],children:[(0,n.jsx)("pointLight",{position:[25,12,20],intensity:1.2,distance:150}),(0,n.jsx)("pointLight",{position:[-15,-8,-15],intensity:.3,distance:150,color:"#aaccff"}),(0,n.jsx)("group",{position:[0,-i/2,0],children:(0,n.jsx)(v,{unfoldProgress:1,scale:100,emissiveIntensity:2*r,couplingPulse:l})}),(0,n.jsx)("group",{position:[0,i/2,0],rotation:[Math.PI,0,0],children:(0,n.jsx)(v,{unfoldProgress:1,scale:100,emissiveIntensity:2*r,couplingPulse:l})}),c>0&&(0,n.jsxs)("mesh",{children:[(0,n.jsx)("sphereGeometry",{args:[8,16,16]}),(0,n.jsx)("meshStandardMaterial",{color:"#88bbff",emissive:"#4488ff",emissiveIntensity:8*c,transparent:!0,opacity:.9*c,blending:u.EZo,depthWrite:!1})]}),r>.1&&(0,n.jsxs)("mesh",{children:[(0,n.jsx)("cylinderGeometry",{args:[3,3,5,12]}),(0,n.jsx)("meshStandardMaterial",{color:"#4488ff",emissive:"#4488ff",emissiveIntensity:5*r,transparent:!0,opacity:.5*r,blending:u.EZo,depthWrite:!1})]})]}),(0,n.jsx)("primitive",{object:m.obj}),a>0&&Array.from({length:16},(e,t)=>{let s=S+400,r=.5*Math.PI,o=-r/2+t/15*r;return t/16>a?null:(0,n.jsxs)("mesh",{position:[Math.cos(o)*s,0,Math.sin(o)*s],children:[(0,n.jsx)("sphereGeometry",{args:[15,8,8]}),(0,n.jsx)("meshStandardMaterial",{color:"#88aacc",emissive:"#4488ff",emissiveIntensity:.8,metalness:.9,roughness:.1})]},"arc-".concat(t))})]})},rotorAcceleration:function(e){let{progress:t}=e,s=(0,o.useRef)(null),r=.1+4*t,a=(0,o.useMemo)(()=>{let e=[];for(let t=0;t<=256;t++){let s=t/256*Math.PI*2;e.push(new u.Pq0(Math.cos(s)*_,0,Math.sin(s)*_))}let t=new u.LoY().setFromPoints(e),s=new u.mrM({color:"#4488ff",transparent:!0,opacity:.6});return new u.N1A(t,s)},[]),i=(0,o.useMemo)(()=>Array.from({length:300},(e,t)=>({angle:t/300*Math.PI*2,radialOffset:(Math.random()-.5)*32,verticalOffset:(Math.random()-.5)*32})),[]),l=(0,o.useMemo)(()=>new Float32Array(900),[]),c=(0,o.useMemo)(()=>{let e=new Float32Array(900);for(let t=0;t<300;t++)e[3*t]=1,e[3*t+1]=.6,e[3*t+2]=.2;return e},[]);(0,h.D)((e,n)=>{if(!s.current)return;for(let e=0;e<300;e++){let s=i[e];if(s.angle+=n*r,s.angle>2*Math.PI&&(s.angle-=2*Math.PI),t>e/300*.4){let n=_+s.radialOffset;l[3*e]=Math.cos(s.angle)*n,l[3*e+1]=s.verticalOffset,l[3*e+2]=Math.sin(s.angle)*n;let r=Math.min(1,1.5*t);c[3*e]=1,c[3*e+1]=.5+.4*r,c[3*e+2]=.1+.8*r}else l[3*e]=0,l[3*e+1]=-999999,l[3*e+2]=0}s.current.geometry.getAttribute("position").needsUpdate=!0;let o=s.current.geometry.getAttribute("color");o&&(o.needsUpdate=!0),a.material.opacity=.3+.7*t});let m=20*t;return(0,n.jsxs)("group",{children:[(0,n.jsx)("primitive",{object:a}),(0,n.jsxs)("mesh",{rotation:[Math.PI/2,0,0],children:[(0,n.jsx)("torusGeometry",{args:[_+m,80,24,200]}),(0,n.jsx)("meshStandardMaterial",{color:"#334466",emissive:"#2244aa",emissiveIntensity:1.5*t,transparent:!0,opacity:.3+.2*t,metalness:.9,roughness:.1})]}),(0,n.jsxs)("points",{ref:s,children:[(0,n.jsxs)("bufferGeometry",{children:[(0,n.jsx)("bufferAttribute",{attach:"attributes-position",args:[l,3]}),(0,n.jsx)("bufferAttribute",{attach:"attributes-color",args:[c,3]})]}),(0,n.jsx)("pointsMaterial",{size:20+30*t,sizeAttenuation:!0,transparent:!0,opacity:.8,vertexColors:!0,blending:u.EZo,depthWrite:!1})]}),(0,n.jsxs)("mesh",{rotation:[Math.PI/2,0,0],children:[(0,n.jsx)("torusGeometry",{args:[_+m,120,8,128]}),(0,n.jsx)("meshStandardMaterial",{color:"#4488ff",emissive:"#4488ff",emissiveIntensity:2.5*t,transparent:!0,opacity:.15*t,blending:u.EZo,depthWrite:!1})]})]})},bootstrapRedundancy:function(e){let{progress:t}=e,s=(0,o.useRef)(null),r=Math.min(1,t/.4),a=Math.max(0,Math.min(1,(t-.3)/.5)),i=Math.max(0,(t-.7)/.3),l=380*E(r),c=(0,o.useMemo)(()=>Array.from({length:8},(e,t)=>-.25+t/7*.5),[]),m=(0,o.useMemo)(()=>c.map(e=>{let t=new Float32Array(6),s=new u.LoY;s.setAttribute("position",new u.THS(t,3));let n=new u.mrM({color:"#aabbdd",transparent:!0,opacity:.7,linewidth:2});return{line:new u.N1A(s,n),angle:e}}),[c]);return(0,h.D)((e,t)=>{for(let{line:e,angle:n}of(s.current&&(s.current.rotation.y+=.02*t),m)){let t=Math.cos(n)*q,s=Math.sin(n)*q,r=q-l,a=Math.cos(n)*r,o=Math.sin(n)*r,i=e.geometry.getAttribute("position");i.setXYZ(0,t,0,s),i.setXYZ(1,a,0,o),i.needsUpdate=!0}}),(0,n.jsxs)("group",{ref:s,children:[(0,n.jsxs)("mesh",{rotation:[Math.PI/2,0,0],children:[(0,n.jsx)("torusGeometry",{args:[q,80,24,200]}),(0,n.jsx)("meshStandardMaterial",{color:"#334466",emissive:"#4488ff",emissiveIntensity:1.5,transparent:!0,opacity:.5,metalness:.9,roughness:.1})]}),(0,n.jsxs)("mesh",{rotation:[Math.PI/2,0,0],children:[(0,n.jsx)("torusGeometry",{args:[q,120,8,128]}),(0,n.jsx)("meshStandardMaterial",{color:"#4488ff",emissive:"#4488ff",emissiveIntensity:1,transparent:!0,opacity:.1,blending:u.EZo,depthWrite:!1})]}),m.map((e,t)=>{let{line:s}=e;return(0,n.jsx)("primitive",{object:s},"tether-".concat(t))}),c.map((e,t)=>{if(l<10)return null;let s=q-l,r=(q+s)/2,a=Math.cos(e)*r,o=Math.sin(e)*r,i=new u.Pq0(Math.cos(e),0,Math.sin(e)),c=new u.Pq0(0,1,0),h=new u.PTz().setFromUnitVectors(c,i);return(0,n.jsxs)("mesh",{position:[a,0,o],quaternion:h,children:[(0,n.jsx)("cylinderGeometry",{args:[3,3,l,6]}),(0,n.jsx)("meshStandardMaterial",{color:"#8899bb",metalness:.8,roughness:.2,transparent:!0,opacity:.6})]},"tether-cyl-".concat(t))}),r>.5&&c.map((e,t)=>{let s=q-l,a=Math.cos(e)*s,o=Math.sin(e)*s;return(0,n.jsxs)("mesh",{position:[a,0,o],children:[(0,n.jsx)("sphereGeometry",{args:[12,8,8]}),(0,n.jsx)("meshStandardMaterial",{color:"#88aacc",emissive:"#ffffff",emissiveIntensity:.5,transparent:!0,opacity:.7*Math.min(1,(r-.5)/.3)})]},"anchor-".concat(t))}),a>0&&c.map((e,t)=>Array.from({length:2},(s,r)=>{let o=(2*t+r)/16,i=Math.max(0,Math.min(1,(a-.5*o)/(1-.5*o)));if(i<=0)return null;let c=q-l+l*E(i),h=Math.cos(e)*c,m=Math.sin(e)*c,d=new u.Pq0(Math.cos(e),0,Math.sin(e)),p=new u.Pq0(0,1,0),f=new u.PTz().setFromUnitVectors(p,d);return(0,n.jsxs)("group",{position:[h,0,m],quaternion:f,children:[(0,n.jsxs)("mesh",{children:[(0,n.jsx)("boxGeometry",{args:[10,15,8]}),(0,n.jsx)("meshStandardMaterial",{color:"#aa8844",metalness:.7,roughness:.3})]}),(0,n.jsxs)("mesh",{children:[(0,n.jsx)("sphereGeometry",{args:[12,6,6]}),(0,n.jsx)("meshStandardMaterial",{color:"#ffaa44",emissive:"#ffaa44",emissiveIntensity:1,transparent:!0,opacity:.3,blending:u.EZo,depthWrite:!1})]})]},"tram-".concat(t,"-").concat(r))})),i>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("mesh",{rotation:[Math.PI/2,0,0],position:[0,40,0],children:[(0,n.jsx)("torusGeometry",{args:[q+50,48,16,200]}),(0,n.jsx)("meshStandardMaterial",{color:"#334466",emissive:"#4488ff",emissiveIntensity:+i,transparent:!0,opacity:.35*i,metalness:.9,roughness:.1})]}),(0,n.jsxs)("mesh",{rotation:[Math.PI/2,0,0],position:[0,40,0],children:[(0,n.jsx)("torusGeometry",{args:[q+50,78,8,128]}),(0,n.jsx)("meshStandardMaterial",{color:"#4488ff",emissive:"#4488ff",emissiveIntensity:.6*i,transparent:!0,opacity:.08*i,blending:u.EZo,depthWrite:!1})]})]})]})}};function D(){let e=l.k.useActorRef(),t=l.k.useSelector(e=>e.context.currentStage),s=l.k.useSelector(e=>e.context.stageProgress);(0,o.useEffect)(()=>{e.send({type:"LOADED"})},[e]);let r=c.an[t],a=r?G[r.key]:null;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("ambientLight",{intensity:.15}),(0,n.jsx)("directionalLight",{position:[5e4,3e4,5e4],intensity:1.5}),(0,n.jsx)("pointLight",{position:[0,0,0],intensity:.05}),(0,n.jsx)(i.A,{radius:1e5,depth:5e4,count:5e3,factor:100,saturation:0}),(0,n.jsx)(d,{}),(0,n.jsx)(M,{}),(0,n.jsx)(x,{}),a&&(0,n.jsx)(a,{progress:s})]})}function R(){return(0,n.jsx)(r.Hl,{camera:{position:[0,10,a.zI.RADIUS_KM*a.Xt.KM_TO_SCENE+440],fov:40,near:.1,far:5e5},gl:{logarithmicDepthBuffer:!0,antialias:!0},style:{width:"100%",height:"100%"},children:(0,n.jsx)(D,{})})}}}]);